
public class SensorReceiver extends BroadcastReceiver {
    private static final String TAG = "SensorReceiver";



    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        int duration = intent.getIntExtra("DURATION", 0);
        boolean isBackground = intent.getBooleanExtra("isBackground", false); // Default to false if not found
        SharedPreferences sharedPref = context.getSharedPreferences("my_prefs", Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPref.edit();
        editor.putBoolean("isBackground",
                isBackground);
        editor.apply();


       if (isBackground){
           Intent i = new Intent("com.example.move");
           context.sendBroadcast(i);
       }

        boolean isForeground = intent.getBooleanExtra("IS_FOREGROUND", true);

        Log.d(TAG,"action is "+action);


        if (action != null) {
            switch (action) {
                case "com.example.sensors_app.START_CAMERA":
                    if (isBackground){
                        new Handler().postDelayed(new Runnable() {
                            @Override
                            public void run() {
                                startCameraService(context,duration,isForeground);
                            }
                        },2000);
                    }
                    else {
                        startCameraService(context,duration,isForeground);
                    }

                    break;

                case "com.example.sensors_app.STOP_CAMERA":
                    stopCameraService(context);
                    break;
}}}
