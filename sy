package com.samsung.android.privacytips;

import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

import androidx.annotation.Nullable;

public class MainActivity extends Activity {

    Button mStartDataCollection;
    Button mStopDataCollection;
    Button mAppUsagePageButton;
    Context mContext;

    private static final String PACKAGE_NAME = "PACKAGE_NAME";
    private static final String START_TIME = "START_TIME";
    private static final String END_TIME = "END_TIME";
    private static final String USER_ID = "USER_ID";
    private static final String REVIEW_PERMISSION_USAGE_ACTION =
            "com.samsung.android.intent.action.REVIEW_PERMISSION_USAGE";
    private static final String REVIEW_PERMISSION_USAGE_DETAIL_ACTION =
            "com.samsung.android.intent.action.REVIEW_PERMISSION_USAGE_DETAIL";

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mContext = this.getApplicationContext();
        mStartDataCollection = findViewById(R.id.start_button);
        mStopDataCollection = findViewById(R.id.stop_button);
        mAppUsagePageButton = findViewById(R.id.third_button);

        mStartDataCollection.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                int i = (int) (10 * Math.random());
                PrivacyTipsEventManager privacyTipsEventManager = new PrivacyTipsEventManager(mContext);
                privacyTipsEventManager.insertIntoContentProvider(System.currentTimeMillis(), System.currentTimeMillis(),
                        "This is Tip : " + i, -1);
                /*PrivacyTipsEventManager privacyTipsEventManager = new PrivacyTipsEventManager(mContext);
                privacyTipsEventManager.setOpNotedCallback();

                Intent intent = new Intent(REVIEW_PERMISSION_USAGE_ACTION);
                intent.putExtra("Test", true);
                intent.putExtra("AppFragment", true);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                mContext.startActivity(intent);*/
            }
        });

        mStopDataCollection.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                //launchPermissionInfoByPackage("com.google.android.gm");
            }
        });

        mAppUsagePageButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                /*Intent intent = new Intent(REVIEW_PERMISSION_USAGE_DETAIL_ACTION);
                intent.putExtra(START_TIME, System.currentTimeMillis() - (24*60*60*1000));
                intent.putExtra(END_TIME, System.currentTimeMillis());
                intent.putExtra(PACKAGE_NAME, "com.google.android.gm");
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                mContext.startActivity(intent);*/
            }
        });
    }

    private void launchPermissionInfoByPackage(String pkgName) {
        Intent intent = new Intent("com.samsung.android.settings.PRIVACY_DASHBOARD_TRAMPOLINE");
        intent.putExtra("trampolineAction", "android.intent.action.MANAGE_APP_PERMISSIONS");
        intent.putExtra(Intent.EXTRA_PACKAGE_NAME, pkgName);
        intent.putExtra("hideInfoButton", true);
        try {
            startActivityForResult(intent, 0);
        } catch (ActivityNotFoundException e) {
            e.printStackTrace();
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
    }
}
